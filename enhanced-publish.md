# 增强发布流程 - 带实时通知

## 工作流程设计

当用户批准文章发布时，系统会执行以下流程并发送实时通知：

### 1. 开始发布 📝
```
🚀 开始发布文章: [文章标题]
正在设置文章状态为发布...
```

### 2. 本地构建 📦
```
📦 正在本地构建...
⏳ 构建中，预计需要30-60秒...
✅ 本地构建完成！生成了 [X] 个页面
```

### 3. GitHub 上传 📤
```
📤 正在上传到 GitHub...
包含构建产物和源代码...
✅ GitHub 上传完成！
```

### 4. 服务器更新 🚚
```
🚚 通知服务器更新...
📥 服务器正在获取最新文件...
📋 服务器正在部署...
✅ 服务器部署完成！
```

### 5. 状态检查 🔍
```
🔍 检查网站发布状态...
⏳ 验证文章页面访问...
✅ 网站发布正常！
```

### 6. 发布完成 🎉
```
🎉 发布成功！

📝 文章：[标题]
🔗 链接：https://chenguangliang.com/posts/[slug]
📊 发布时间：2026-02-11 21:05:30
⏱️ 总耗时：1分20秒

📋 完成状态：
✅ 本地构建
✅ GitHub 上传  
✅ 服务器部署
✅ 网站访问验证
```

## 实现方式

通过在部署脚本的关键节点调用 OpenClaw 的 `message` 工具：

```bash
# 发送进度通知
send_notification() {
    openclaw message send --target 1638777420 --message "$1"
}

# 在部署脚本中使用
send_notification "📦 正在本地构建..."
npm run build
send_notification "✅ 本地构建完成！"
```

## 优势

1. **实时反馈** - 用户随时知道发布进度
2. **问题定位** - 快速发现哪一步出现问题  
3. **体验提升** - 减少等待焦虑
4. **状态透明** - 整个流程可见可控